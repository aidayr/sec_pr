import telebot
from telebot import types

bot = telebot.TeleBot("7863660075:AAEi_LAfBuNYFLM11nCGjmmRV3M9J9r4C6U")

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
user_data = {}

@bot.message_handler(commands=['start'])
def send_welcome(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    markup.add("–†–µ—Å—Ç–æ—Ä–∞–Ω", "–°–ø–∞-—Å–∞–ª–æ–Ω", "–ê–≤—Ç–æ—Å–∞–ª–æ–Ω")
    bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ñ–µ—Ä—É –±–∏–∑–Ω–µ—Å–∞:", reply_markup=markup)

@bot.message_handler(func=lambda message: message.text in ["–†–µ—Å—Ç–æ—Ä–∞–Ω", "–°–ø–∞-—Å–∞–ª–æ–Ω", "–ê–≤—Ç–æ—Å–∞–ª–æ–Ω"])
def handle_business_choice(message):
    chat_id = message.chat.id
    business = message.text
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_data[chat_id] = {
        'business': business,
        'capital': 5000000 if business == "–†–µ—Å—Ç–æ—Ä–∞–Ω" else 3000000 if business == "–°–ø–∞-—Å–∞–ª–æ–Ω" else 10000000,
        'rating': 5.0
    }
    
    if business == "–†–µ—Å—Ç–æ—Ä–∞–Ω":
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add("–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∂–∞–ª–æ–±—É", "–ò–∑–≤–∏–Ω–∏—Ç—å—Å—è –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–∫–∏–¥–∫—É", "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ")
        bot.send_message(chat_id, f"""üçΩ {business}
–ù–∞—á–∞–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª: {user_data[chat_id]['capital']:,} —Ä—É–±
–†–µ–π—Ç–∏–Ω–≥: {user_data[chat_id]['rating']}

–°–∏—Ç—É–∞—Ü–∏—è 1: –ö–ª–∏–µ–Ω—Ç –∂–∞–ª—É–µ—Ç—Å—è –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö –Ω–∞ –Ω–µ—Å–≤–µ–∂–µ–µ –±–ª—é–¥–æ.""", reply_markup=markup)
    
    # –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –±–∏–∑–Ω–µ—Å–æ–≤...

@bot.message_handler(func=lambda message: message.text in ["–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∂–∞–ª–æ–±—É", "–ò–∑–≤–∏–Ω–∏—Ç—å—Å—è –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–∫–∏–¥–∫—É", "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ"])
def handle_restaurant_choice(message):
    chat_id = message.chat.id
    choice = message.text
    
    if chat_id not in user_data:
        return send_welcome(message)
    
    response = ""
    
    if choice == "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∂–∞–ª–æ–±—É":
        user_data[chat_id]['rating'] -= 1.8
        user_data[chat_id]['capital'] -= 200000
        response = """üìâ –í—ã –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏ –∂–∞–ª–æ–±—É:
- –†–µ–π—Ç–∏–Ω–≥ —É–ø–∞–ª –¥–æ {rating:.1f}
- –£–±—ã—Ç–∫–∏: 200,000 —Ä—É–±
- –ö–ª–∏–µ–Ω—Ç—ã –º–∞—Å—Å–æ–≤–æ –∂–∞–ª—É—é—Ç—Å—è –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö""".format(rating=user_data[chat_id]['rating'])
    
    elif choice == "–ò–∑–≤–∏–Ω–∏—Ç—å—Å—è –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–∫–∏–¥–∫—É":
        user_data[chat_id]['rating'] += 0.2
        user_data[chat_id]['capital'] -= 50000
        response = """üìà –í—ã –∏–∑–≤–∏–Ω–∏–ª–∏—Å—å:
+ –†–µ–π—Ç–∏–Ω–≥ –≤—ã—Ä–æ—Å –¥–æ {rating:.1f}
- –†–∞—Å—Ö–æ–¥—ã: 50,000 —Ä—É–± (—Å–∫–∏–¥–∫–∞)
- –ö–ª–∏–µ–Ω—Ç –æ—Å—Ç–∞–ª—Å—è –¥–æ–≤–æ–ª–µ–Ω""".format(rating=user_data[chat_id]['rating'])
    
    elif choice == "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ":
        user_data[chat_id]['capital'] -= 100000
        response = """üîç –í—ã –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ –∫–∞—á–µ—Å—Ç–≤–æ:
- –†–∞—Å—Ö–æ–¥—ã: 100,000 —Ä—É–± (–∞—É–¥–∏—Ç)
+ –†–µ–π—Ç–∏–Ω–≥ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
‚úì –ü—Ä–æ–±–ª–µ–º–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞"""
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –Ω–æ–≤–æ–µ –º–µ–Ω—é
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    markup.add("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å", "–í—ã–π—Ç–∏ –≤ –º–µ–Ω—é")
    
    response += f"\n\n–¢–µ–∫—É—â–∏–π –∫–∞–ø–∏—Ç–∞–ª: {user_data[chat_id]['capital']:,} —Ä—É–±\n–†–µ–π—Ç–∏–Ω–≥: {user_data[chat_id]['rating']:.1f}"
    bot.send_message(chat_id, response, reply_markup=markup)

@bot.message_handler(func=lambda message: message.text == "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å")
def continue_game(message):
    chat_id = message.chat.id
    if chat_id not in user_data:
        return send_welcome(message)
    
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å–∏—Ç—É–∞—Ü–∏—é
    bot.send_message(chat_id, "–°–ª–µ–¥—É—é—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –±—É–¥–µ—Ç –∑–¥–µ—Å—å...")

@bot.message_handler(func=lambda message: message.text == "–í—ã–π—Ç–∏ –≤ –º–µ–Ω—é")
def return_to_menu(message):
    send_welcome(message)

bot.polling()
